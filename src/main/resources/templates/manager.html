<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Kadmin @ BetterCloud</title>
        <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
        <link th:href="@{/favicon.ico}" rel="icon" />
        <style>
            .refresh-button {
                float: right;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div>
                <ul class="nav nav-pills">
                    <li role="presentation"><a th:href="@{/}">Home</a></li>
                    <li role="presentation" th:if="${producerEnabled}"><a th:href="@{/basicproducer}">Basic Producer</a></li>
                    <li role="presentation" th:if="${producerEnabled}"><a th:href="@{/producer}">Avro Producer</a></li>
                    <li role="presentation"><a th:href="@{/consumer}">Consumer</a></li>
                    <li role="presentation" class="active"><a th:href="@{/manager}">Manager</a></li>
                </ul>
            </div>
            <div id="main-content"></div>
        </div>

        <script th:inline="javascript">
            /*<![CDATA[*/
            var App = {
                contextPath: [[${contextPath}]],
                consumerTemplateLoaded: false,
                producerTemplateLoaded: false,
                mainTemplateLoaded: false,
                pageLoaded: false,
                manager: {}
            };

            /*]]>*/
        </script>
        <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
        <script type="text/javascript" th:src="@{/js/underscore-min.js}"></script>
        <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
        <script type="text/javascript" th:src="@{/js/moment.min.js}"></script>
        <script type="text/javascript" th:src="@{/js/ace.min.js}"></script>
        <script type="text/javascript" th:src="@{/manager/main.js}"></script>

        <script>
            $.get(App.contextPath + "/manager/main.html", function (html) {
                $('#main-content').html(html);
                App.mainTemplateLoaded = true;
                initMain();
            });
            $.get(App.contextPath + "/manager/consumer-template.html", function (html) {
                App.manager.consumerTemplate = _.template(html);
                App.consumerTemplateLoaded = true;
                initMain();
            });
            $.get(App.contextPath + "/manager/producer-template.html", function (html) {
                App.manager.producerTemplate = _.template(html);
                App.producerTemplateLoaded = true;
                initMain();
            });

            $(document).ready(function() {
                App.pageLoaded = true;
                initMain();
            });
        </script>
    </body>
</html>
